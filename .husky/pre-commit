#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

echo "\nğŸ“ Step 1/5: TypeScript compilation (tsc)..."
tsc -b || { echo "âŒ TypeScript compilation failed"; exit 1; }

echo "\nâœ¨ Step 2/5: Formatting and linting staged files..."
npx lint-staged || { echo "âŒ Formatting/linting failed"; exit 1; }

echo "\nğŸ§ª Step 3/5: Running tests..."
npm run test || { echo "âŒ Tests failed"; exit 1; }

echo "\nğŸ—ï¸  Step 4/5: Building project..."
npm run build || { echo "âŒ Build failed"; exit 1; }

echo "\nâœ… All pre-commit checks passed!"
